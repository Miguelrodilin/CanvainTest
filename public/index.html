<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Buscador do Flare</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <h1>Buscador de links Canva Pro</h1>
  <button onclick="buscarLink()">Buscar Link</button>
  <div id="link">Clique no botão acima</div>

  <script>
    async function buscarLink() {
      const linkDiv = document.getElementById("link");
      linkDiv.textContent = "Buscando, aguarde...";
      try {
        const res = await fetch("/api/get-link");
        const data = await res.json();

        if (data.link) {
          linkDiv.innerHTML = `✅ Link: <a href="${data.link}" target="_blank">${data.link}</a>`;
          if (data.isOnline === false) {
            const aviso = document.createElement("p");
            aviso.style.color = "#d93025";
            aviso.style.marginTop = "10px";
            aviso.textContent = "⚠️ Atenção: O link pode estar offline ou indisponível no momento.";
            linkDiv.appendChild(aviso);
          }
        } else if (data.error) {
          linkDiv.textContent = `❌ Erro: ${data.error}`;
          linkDiv.id = "error";
        } else {
          linkDiv.textContent = "❌ Link não encontrado.";
          linkDiv.id = "error";
        }
      } catch {
        linkDiv.textContent = "❌ Erro ao buscar o link.";
        linkDiv.id = "error";
      }
    }
  </script>
</body>
</html>
